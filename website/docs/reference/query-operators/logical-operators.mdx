---
sidebar_position: 1
description: Logical query operators for filtering documents based on specified query expressions that are either true or false.
---

# Logical query operators

import CodeBlock from '@theme/CodeBlock';
import Dataset from '!!raw-loader!./logical-operators/2-insert-dataset.request.js';
import AndOperatorRequest from '!!raw-loader!./logical-operators/3-and-operator.request.js';
import AndOperatorResponse from '!!raw-loader!./logical-operators/3-and-operator.response.js';
import OrOperatorRequest from '!!raw-loader!./logical-operators/4-or-operator.request.js';
import OrOperatorResponse from '!!raw-loader!./logical-operators/4-or-operator.response.js';
import NotOperatorRequest from '!!raw-loader!./logical-operators/5-not-operator.request.js';
import NotOperatorResponse from '!!raw-loader!./logical-operators/5-not-operator.response.js';
import NorOperatorRequest from '!!raw-loader!./logical-operators/6-nor-operator.request.js';
import NorOperatorResponse from '!!raw-loader!./logical-operators/6-nor-operator.response.js';

Logical query operators are used to filter documents based on specified query expressions that are either true or false.

<!-- Syntax structure of the command here if there are no variations, types, or usage examples to command. Otherwise, use syntax inside subcategories-->

```js
db.runCommand({
  aggregate: '<collection_name>',
  pipeline: [
    {
      $<operator>: [
        { <query-expression1> },
        { <query-expression2> },
        ...
        { <query-expressionN> }
      ]
    }
  ],
  cursor: {}
})
```

<!-- markdownlint-disable MD033 -->

| Operator                | Description                                                                                               |
| ----------------------- | --------------------------------------------------------------------------------------------------------- |
| [`$and`](#and-operator) | Combines multiple query expressions and outputs all documents that match both expressions.                |
| [`$or`](#or-operator)   | Combines multiple query expressions and outputs all documents that match at least one of the expressions. |
| [`$not`](#not-operator) | Returns all documents that fail to match a specified query expression.                                    |
| [`$nor`](#nor-operator) | Combines multiple query expressions and returns all documents that do not match any of the expressions.   |

The following examples demonstrate how to use logical operators in queries using documents in a `books` collection:

<CodeBlock language="js">{Dataset}</CodeBlock>

## `$and` operator

Using the `books` collection, return all documents where the author is `British` AND rating is greater or equal to 4.5.

<CodeBlock language="js">{AndOperatorRequest}</CodeBlock>

The AND operation returns `pride_prejudice_1813` as the document that matches both expressions.

<CodeBlock language="js">{AndOperatorResponse}</CodeBlock>

Even though `clean_code_2008` matches the second query expression in the earlier example, it is not returned since it does not match the first one.

## `$or` operator

Using the same conditions as the one above but with the `$or` operator (author is British OR the rating is greater or equal to 4.5), return all documents that satisfy at least one of the conditions.

<CodeBlock language="js">{OrOperatorRequest}</CodeBlock>

Both `pride_prejudice_1813` and `clean_code_2008` are returned since they match at least one of the query expressions.

<CodeBlock language="js">{OrOperatorResponse}</CodeBlock>

## `$not` operator

Using the books collection, return all documents where the rating is not less than 4.5.

<CodeBlock language="js">{NotOperatorRequest}</CodeBlock>

The `$not` operator negates the query expression, so it returns all documents where the rating is not less than 4.5.
In this case, it returns `pride_prejudice_1813` and `clean_code_2008` since they both have a rating greater than or equal to 4.5.

<CodeBlock language="js">{NotOperatorResponse}</CodeBlock>

## `$nor` operator

Using the books collection, return all documents where the author is not British AND the rating is not greater than or equal to 4.5.

<CodeBlock language="js">{NorOperatorRequest}</CodeBlock>

The `$nor` operator returns all documents that do not match any of the query expressions.
In this case, it returns `moby_dick_1851` since it does not match either of the query expressions.

<CodeBlock language="js">{NorOperatorResponse}</CodeBlock>

## Implementation notes and constraints
