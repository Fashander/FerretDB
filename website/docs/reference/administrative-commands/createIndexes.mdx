---
sidebar_position: 1
description: Create one or more indexes on a collection to improve query performance and enable certain query features.
---

# `createIndexes`

import CodeBlock from '@theme/CodeBlock';
import CreateIndex from '!!raw-loader!../../guides/create-indexes/1-create-simple-index.request.js';
import CreateUniqueIndex from '!!raw-loader!../../guides/create-indexes/2-create-unique-index.request.js';
import CreateCompoundIndex from '!!raw-loader!../../guides/create-indexes/3-create-compound-index.request.js';
import CreatePartialIndex from '!!raw-loader!../../guides/create-indexes/4-create-partial-index.request.js';
import CreateSparseIndex from '!!raw-loader!../../guides/create-indexes/5-create-sparse-index.request.js';

<!-- Category for Command "Administrative, Diagnostic, and Utility Commands" should be organized per folder as present in the compatibility document -->

<!-- Short description of the command and its usage. -->

Create one or more indexes on a given collection to improve query performance or enable certain query features (e.g., full-text, vector, and TTL indexes).

<!-- Syntax structure of the command here if there are no variations, types, or usage examples to command. Otherwise, use syntax inside subcategories-->

<!-- markdownlint-disable MD033 -->

This command accepts a collection name and an array of index specification documents.
The index specification document specifies the fields to be indexed, the index name, and other options such as uniqueness, partial filter expressions, and expiration times for TTL indexes.

<!-- majorly fields such as arguments, modifers, stage, operators, parameters, options supported by the command in a table (if necessary or available). Takes in the following parameters: -->

| Field                     | Type     | Description                                                                                                                                       |
| ------------------------- | -------- | ------------------------------------------------------------------------------------------------------------------------------------------------- |
| `createIndexes`           | string   | The name of the collection.                                                                                                                       |
| `indexes`                 | array    | An array of index specification documents. Each document defines an index.                                                                        |
| `key`                     | document | A single document that contains the field(s) to index and their sort order or type (`1`, `-1`, `text`, `cosmosSearch` for vector indexes, etc). |
| `name`                    | string   | A required name for the index. Must be unique to the collection.                                                                                  |
| `unique`                  | boolean  | Ensures all values are unique for the indexed field if set to `true`.                                                                             |
| `partialFilterExpression` | document | Restricts index to documents matching the condition.                                                                                              |
| `sparse`                  | boolean  | Only indexes documents that contain the indexed field if set to `true`.                                                                           |

## Example usage

The following examples demonstrate how to create different types of indexes.

### Simple index

The simplest way to create an index is to use the `createIndexes` command with the `key` field (the field(s) to be indexed) and their sort order (`1` for ascending, `-1` for descending).

<!-- Syntax structure of the command type, only included here within subcategories-->

```js
db.runCommand({
  createIndexes: '<collection_name>',
  indexes: [
    {
      key: {
        '<field1>': 1 // ascending
      }
    }
  ]
})
```

This example creates a simple index on the `title` field in the `books` collection.

<CodeBlock language="js">{CreateIndex}</CodeBlock>

### Compound index

Compound indexes enables multiple fields to be indexed together, as shown in the syntax below:

```js
db.runCommand({
  createIndexes: '<collection_name>',
  indexes: [
    {
      key: {
        '<field1>': 1, // ascending
        '<field2>': -1 // descending
      },
      name: '<compound_index_name>' // string
    }
  ]
})
```

The example below creates a compound index on the `publication.date` and `analytics.average_rating` fields in the `books` collection.

<CodeBlock language="js">{CreateCompoundIndex}</CodeBlock>

### Unique index

Unique indexes ensure that your indexed fields only contain unique values, without duplicates.

```js
db.runCommand({
  createIndexes: '<collection_name>',
  indexes: [
    {
      key: {
        '<field>': 1 // ascending
      },
      name: '<unique_index_name>', // string
      unique: true // boolean
    }
  ]
})
```

This example creates a unique index on the `isbn` field in the `books` collection to ensure that each book has a unique ISBN.

<CodeBlock language="js">{CreateUniqueIndex}</CodeBlock>

### Partial index

A partial index is similar to a regular index, however, it only indexes a fraction of documents in a collection based on a specified filter condition.

```js
db.runCommand({
  createIndexes: '<collection_name>',
  indexes: [
    {
      key: {
        '<field>': 1 // ascending
      },
      name: '<partial_index_name>', // string
      partialFilterExpression: {
        '<field>': { <operator>: '<value>' }
      } // Optional
    }
  ]
})
```

Let's create a partial index on the `books` collection only for books published after the year 2000.

<CodeBlock language="js">{CreatePartialIndex}</CodeBlock>

### Sparse index

Sparse indexes only sets an index on documents with the specified field, even if the field is not present in all documents.

```js
db.runCommand({
  createIndexes: '<collection_name>',
  indexes: [
    {
      key: {
        '<field>': 1 // ascending
      },
      name: '<sparse_index_name>', // string
      sparse: true // boolean
    }
  ]
})
```

For example, if you want to create a sparse index on the `books` collection for the `price` field, you can do so as follows:

<CodeBlock language="js">{CreateSparseIndex}</CodeBlock>

## Implementation notes and constraints

<!-- If there are any known or unique information about command behavior, limitations, or contraints, list them here -->

- `partialFilterExpression` and `sparse` options cannot be used together in the same index specification. If both are specified, the command will fail with an error.
- `hidden` indexes are not supported yet.

## Additional information

<!-- Include and link to other related materials or information here -->

Please find other usages of `createIndexes` below:

- [Vector Indexes](../../guides/vector-search.mdx)
- [TTL Indexes](../../guides/ttl-indexes.mdx)
- [Full-Text Indexes](../../guides/full-text-search.mdx)

<!-- markdownlint-enable MD033 -->
