---
sidebar_position: 1
description: Create one or more indexes on a collection to improve query performance and enable certain query features.
---

# createIndexes

import CodeBlock from '@theme/CodeBlock';
import CreateIndexes from '!!raw-loader!./createIndexes.js';
import CreateIndex from '!!raw-loader!../\_data/createIndexes/1-create-simple-index.request.js';
import CreateUniqueIndex from '!!raw-loader!../\_data/createIndexes/2-create-unique-index.request.js';
import CreateCompoundIndex from '!!raw-loader!../\_data/createIndexes/3-create-compound-index.request.js';
import CreatePartialIndex from '!!raw-loader!../\_data/createIndexes/4-create-partial-index.request.js';
import CreateSparseIndex from '!!raw-loader!../\_data/createIndexes/5-create-sparse-index.request.js';

<!-- Short description of the command and its usage. -->

The `createIndexes` command creates one or more indexes on a given collection to improve query performance or enable certain query features (e.g., full-text, vector, and TTL indexes).

<!-- Syntax structure of the command here with all available options, field variables, and types.-->

<!-- markdownlint-disable MD033 -->

This command accepts a collection name and an array of index specification documents.
The index specification document specifies the fields to be indexed, the index name, and other options such as uniqueness, partial filter expressions, and expiration times for TTL indexes.

<CodeBlock language="js">{CreateIndexes}</CodeBlock>

The table below describes the fields and options available for the `createIndexes` command.

<!-- Explain fields such as arguments, modifiers, stage, operators, parameters, options supported by the command in a table format if more than a single item (if necessary or available): -->

| Field                     | Type     | Description                                                                                                                                                                                                                               |
| ------------------------- | -------- | ----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| `createIndexes`           | string   | The name of the collection.                                                                                                                                                                                                               |
| `indexes`                 | array    | An array of index specification documents. Each document defines an index.                                                                                                                                                                |
| `key`                     | document | A single document that contains the field(s) to index and their sort order or type (e.g. `1` for ascending, `-1` for descending, `text` for full-text indexes, `cosmosSearch` for vector indexes, and `2dsphere` for geospatial indexes). |
| `name`                    | string   | A required name for the index. Must be unique to the collection.                                                                                                                                                                          |
| `unique`                  | boolean  | Optional. Ensures all values are unique for the indexed field if set to `true`.                                                                                                                                                           |
| `partialFilterExpression` | document | Optional. Restricts index to documents matching the condition.                                                                                                                                                                            |
| `sparse`                  | boolean  | Optional. Only indexes documents that contain the indexed field if set to `true`.                                                                                                                                                         |
| `expireAfterSeconds`      | int32    | Optional. Specifically used for creating TTL indexes. Automatically deletes documents after set time.                                                                                                                                     |
| `cosmosSearchOptions`     | document | Optional. Specifies the configuration parameters (`kind`, `similarity`, `dimensions`, etc.) for creating a vendor index. [See vector index guide for more details](../../guides/vector-search.mdx).                                         |

## Example

The following examples demonstrate how to create different types of indexes.

### Simple index

The simplest way to create an index is to use the `createIndexes` command with the `key` field (the field(s) to be indexed) and their sort order (`1` for ascending, `-1` for descending).

This example creates a simple index on the `title` field in the `books` collection.

<CodeBlock language="js">{CreateIndex}</CodeBlock>

### Compound index

Compound indexes enable multiple fields to be indexed together.

The example below creates a compound index on the `publication.date` and `analytics.average_rating` fields in the `books` collection.

<CodeBlock language="js">{CreateCompoundIndex}</CodeBlock>

### Unique index

Unique indexes ensure that your indexed fields only contain unique values, without duplicates.

This example creates a unique index on the `isbn` field in the `books` collection to ensure that each book has a unique ISBN.

<CodeBlock language="js">{CreateUniqueIndex}</CodeBlock>

### Partial index

A partial index is similar to a regular index, however, it only indexes a fraction of documents in a collection based on a specified filter condition.

Let's create a partial index on the `books` collection only for books published after the year 2000.

<CodeBlock language="js">{CreatePartialIndex}</CodeBlock>

### Sparse index

Sparse indexes only apply on documents with the specified index field. Documents without the indexed field are not included in the index.

For example, if you want to create a sparse index on the `books` collection for documents that include the `price` field, you can do so as follows:

<CodeBlock language="js">{CreateSparseIndex}</CodeBlock>

## Implementation notes and constraints

<!-- If there are any known or unique information about command behavior, limitations, or contraints, list them here -->

- `partialFilterExpression` and `sparse` options cannot be used together in the same index specification. If both are specified, the command will fail with an error.
- `hidden` indexes are not supported yet.

## Additional information

<!-- Include and link to other related materials or information here -->

Please find other usages of `createIndexes` below:

- [Vector Indexes](../../guides/vector-search.mdx)
- [TTL Indexes](../../guides/ttl-indexes.mdx)
- [Full-Text Indexes](../../guides/full-text-search.mdx)

<!-- markdownlint-enable MD033 -->
