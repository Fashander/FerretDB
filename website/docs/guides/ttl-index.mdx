---
sidebar_position: 4
description: Learn about TTL indexes in FerretDB.
---

# TTL index

TTL (Time-To-Live) indexes are useful when you need documents to expire automatically after a certain time. It's ideal for temporary records, logs, or session data.

## Creating a TTL index

A TTL index is created using the `createIndex` command with the field you want to index and the `expireAfterSeconds`.
The field must be a `Date` type.
The `expireAfterSeconds` option indicates the number of seconds before a document expires.

For example, to create a TTL index on a `publication.date` field in a `books` collection:

```js
db.runCommand({
  createIndexes: 'books',
  indexes: [
    {
      key: { 'publication.date': 1 },
      name: 'publication_date_ttl',
      expireAfterSeconds: 10
    }
  ]
})
```

Let's insert a document into the `books` collection:

```js
db.runCommand({
  insert: 'books',
  documents: [
    {
      title: 'The Great Gatsby',
      publication: {
        date: new Date()
      }
    }
  ]
})
```

After 10 seconds, the document will expire and be removed from the collection.
Run the following command to check if the document has been removed:

```js
db.runCommand({
  find: 'books'
})
```

## Limitations

- The cleanup of expired documents is a background operation that runs every 60 seconds, so deletion may not be immediate.
- Dateocuments inserted before the index was created may not be affected until an insert or update operation occurs. It is recommended to create the TTL index before inserting documents.
- TTL indexes are single-field indexes, compound indexes do not support TTL.
